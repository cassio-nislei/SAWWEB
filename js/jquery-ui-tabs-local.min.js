/*!
 * jQuery UI Tabs - Minimal Fallback v1.0
 * Provides basic jQuery UI Tabs functionality for SAW
 */

if (typeof jQuery !== "undefined" && jQuery.fn) {
  jQuery.fn.tabs =
    jQuery.fn.tabs ||
    function (options) {
      const $this = jQuery(this);
      options = options || {};

      $this.each(function () {
        const $el = jQuery(this);
        const $tabs = $el.find(
          '[role="tab"], [data-tab], > ul > li, > div > ul > li',
        );
        const $panels = $el.find(
          '[role="tabpanel"], [data-panel], > div > div',
        );

        // Mark tabs
        $tabs
          .attr("role", "tab")
          .attr("aria-selected", "false")
          .css({
            cursor: "pointer",
            padding: "10px 15px",
            display: "inline-block",
            border: "1px solid #ddd",
            "border-radius": "4px 4px 0 0",
            "margin-right": "2px",
            "background-color": "#f5f5f5",
          })
          .addClass("ui-tabs-tab");

        // Mark panels
        $panels
          .attr("role", "tabpanel")
          .css({
            display: "none",
            padding: "15px",
            border: "1px solid #ddd",
            "border-radius": "0 4px 4px 4px",
          })
          .addClass("ui-tabs-panel");

        // Activate first tab
        $tabs.first().attr("aria-selected", "true").css({
          "background-color": "#128c7e",
          color: "#fff",
          "border-color": "#128c7e",
        });

        $panels.first().css("display", "block");

        // Tab click handler
        $tabs.on("click", function () {
          const $tab = jQuery(this);
          const index = $tabs.index($tab);

          // Deactivate all tabs
          $tabs.attr("aria-selected", "false").css({
            "background-color": "#f5f5f5",
            color: "#000",
            "border-color": "#ddd",
          });
          $panels.hide();

          // Activate clicked tab
          $tab.attr("aria-selected", "true").css({
            "background-color": "#128c7e",
            color: "#fff",
            "border-color": "#128c7e",
          });

          if ($panels.eq(index).length) {
            $panels.eq(index).show();
          }

          // Trigger change event
          $el.trigger("tabsactivate", [
            { tab: $tab, panel: $panels.eq(index) },
          ]);
        });
      });

      return $this;
    };

  // Mark as available
  window.jqueryUITabsAvailable = true;
  if (typeof window.pluginsReady !== "undefined") {
    window.pluginsReady.tabs = true;
  }
  console.log("âœ… jQuery UI Tabs (minimal fallback) carregado");
}
