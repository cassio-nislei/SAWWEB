// Select2 Minimal Local Build - Fallback
// Provides basic Select2 functionality when CDN fails

if (typeof jQuery !== "undefined" && jQuery.fn) {
  // Definir a função
  var select2Function = function (options) {
    options = options || {};
    return this.each(function () {
      const $el = jQuery(this);
      $el.addClass("select2-hidden-accessible");
      $el.data("select2", true);
      $el.css({
        padding: "8px",
        border: "1px solid #ddd",
        "border-radius": "4px",
        "font-size": "14px",
        "background-color": "#fff",
      });
      if (options.placeholder && !$el.find('option[value=""]').length) {
        $el.prepend('<option value="">' + options.placeholder + "</option>");
      }
    });
  };

  // Atribuir a jQuery
  jQuery.fn.select2 = select2Function;

  // Atribuir a $ também (se $ for diferente de jQuery por algum motivo)
  if (typeof $ !== "undefined" && $ !== jQuery) {
    $.fn.select2 = select2Function;
  }

  // Marcar como pronto
  window.select2Available = true;
  if (typeof window.pluginsReady !== "undefined") {
    window.pluginsReady.select2 = true;
  }

  console.log(
    "✅ Select2 Local (minimal) carregado. typeof $.fn.select2 =",
    typeof $.fn.select2,
  );
}
